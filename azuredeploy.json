{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "sshPublicKeys_T_key_name": {
      "defaultValue": "T_key",
      "type": "String"
    },
    "vaults_TP1_KEYVAULT_name": {
      "defaultValue": "TP1-KEYVAULT",
      "type": "String"
    },
    "loadBalancers_TP1_LOAD_BALANCER_name": {
      "defaultValue": "TP1-LOAD-BALANCER",
      "type": "String"
    },
    "virtualMachineScaleSets_TP1_SCALESET_name": {
      "defaultValue": "TP1-SCALESET",
      "type": "String"
    },
    "virtualMachines_TP1_SCALESET_ddac2be7_name": {
      "defaultValue": "TP1-SCALESET_ddac2be7",
      "type": "String"
    },
    "autoscalesettings_TP1_SCALESETautoscale_name": {
      "defaultValue": "TP1-SCALESETautoscale",
      "type": "String"
    },
    "virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name": {
      "defaultValue": "UQAC-8CLD201-G11-TP1-vnet",
      "type": "String"
    },
    "publicIPAddresses_TP1_LOAD_BALANCER_publicip_name": {
      "defaultValue": "TP1-LOAD-BALANCER-publicip",
      "type": "String"
    },
    "networkInterfaces_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name": {
      "defaultValue": "UQAC-8CLD201-G11-TP1-vnet-nic01-a316d225",
      "type": "String"
    },
    "networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name": {
      "defaultValue": "basicNsgUQAC-8CLD201-G11-TP1-vnet-nic01",
      "type": "String"
    },
    "publicIPAddresses_publicIp_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name": {
      "defaultValue": "publicIp-UQAC-8CLD201-G11-TP1-vnet-nic01-a316d225",
      "type": "String"
    }
  },
  "variables": {},
  "resources": [
    {
      "type": "Microsoft.Compute/sshPublicKeys",
      "apiVersion": "2024-07-01",
      "name": "[parameters('sshPublicKeys_T_key_name')]",
      "location": "eastus",
      "properties": {
        "publicKey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCp9nhJerVAEqrf57Ubd2H4HDi1wPvro+tHoIxJ6J/tSqgHnvbjFoTtsfV70m36Q9Ft4DBeFnhHKNRbat/4tGfmmULX+BQvYNPFxB1FE8SYGIrOqhtuCBKdnhhMYLvUxDANP79gKJCZgImk3NR7hOgJEudTdTbEgK81bQNqAgY2o3g0dPdpup+f/uYTqB9vxMborgS/t6igFaqgsToL0C1Q80WgC+9Skiku0+PnRz0ujiS3vDmAlN3asC0DGAWo6QFxWdWmS7nCoQ23GVRW6M2Ed/Wss5LPUx0UO4ZJ+phiUGtu6oXIvc9QLAoL1OEqU5DO3RLsINkmjui+vyFba0XAnyBo6cCmwSUgX+xOR/cjuqKFP2/qHG/tOlICzGUFWCGcLEMy0StZ3UDx0nLH4XGOF3f3mbA5QrMjx1t0IbQ3sG+QUexdRf6g24zp8ZC0EANAf49zYopaw/8zPM9TAVeZSeYHN7Otoqxox6qx+f5mBLWKv1Z3MKPSmf5Xjo/StRE= generated-by-azure"
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults",
      "apiVersion": "2024-04-01-preview",
      "name": "[parameters('vaults_TP1_KEYVAULT_name')]",
      "location": "eastus",
      "properties": {
        "sku": {
          "family": "A",
          "name": "Standard"
        },
        "tenantId": "6e1c03f2-efce-4ddf-affe-19c2df258e30",
        "accessPolicies": [],
        "enabledForDeployment": true,
        "enabledForDiskEncryption": true,
        "enabledForTemplateDeployment": true,
        "enableSoftDelete": true,
        "softDeleteRetentionInDays": 90,
        "enableRbacAuthorization": true,
        "vaultUri": "https://tp1-keyvault.vault.azure.net/",
        "provisioningState": "Succeeded",
        "publicNetworkAccess": "Enabled"
      }
    },
    {
      "type": "Microsoft.Network/networkSecurityGroups",
      "apiVersion": "2024-01-01",
      "name": "[parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name')]",
      "location": "eastus",
      "properties": {
        "securityRules": [
          {
            "name": "Tcp",
            "id": "[resourceId('Microsoft.Network/networkSecurityGroups/securityRules', parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'), 'Tcp')]",
            "type": "Microsoft.Network/networkSecurityGroups/securityRules",
            "properties": {
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "80",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 300,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          }
        ]
      }
    },
    {
      "type": "Microsoft.Network/publicIPAddresses",
      "apiVersion": "2024-01-01",
      "name": "[parameters('publicIPAddresses_publicIp_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name')]",
      "location": "eastus",
      "sku": {
        "name": "Standard",
        "tier": "Regional"
      },
      "zones": [
        "1"
      ],
      "properties": {
        "ipAddress": "52.186.176.204",
        "publicIPAddressVersion": "IPv4",
        "publicIPAllocationMethod": "Static",
        "idleTimeoutInMinutes": 15,
        "ipTags": []
      }
    },
    {
      "type": "Microsoft.Network/publicIPAddresses",
      "apiVersion": "2024-01-01",
      "name": "[parameters('publicIPAddresses_TP1_LOAD_BALANCER_publicip_name')]",
      "location": "eastus",
      "sku": {
        "name": "Standard",
        "tier": "Regional"
      },
      "zones": [
        "1",
        "2",
        "3"
      ],
      "properties": {
        "ipAddress": "57.151.71.34",
        "publicIPAddressVersion": "IPv4",
        "publicIPAllocationMethod": "Static",
        "idleTimeoutInMinutes": 15,
        "ipTags": []
      }
    },
    {
      "type": "Microsoft.Network/virtualNetworks",
      "apiVersion": "2024-01-01",
      "name": "[parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name')]",
      "location": "eastus",
      "properties": {
        "addressSpace": {
          "addressPrefixes": [
            "10.0.0.0/16"
          ]
        },
        "subnets": [
          {
            "name": "default",
            "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'), 'default')]",
            "properties": {
              "addressPrefix": "10.0.0.0/20",
              "delegations": [],
              "privateEndpointNetworkPolicies": "Disabled",
              "privateLinkServiceNetworkPolicies": "Enabled"
            },
            "type": "Microsoft.Network/virtualNetworks/subnets"
          }
        ],
        "virtualNetworkPeerings": [],
        "enableDdosProtection": false
      }
    },
    {
      "type": "Microsoft.Compute/virtualMachineScaleSets/extensions",
      "apiVersion": "2024-07-01",
      "name": "[concat(parameters('virtualMachineScaleSets_TP1_SCALESET_name'), '/HealthExtension')]",
      "dependsOn": [
        "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]"
      ],
      "properties": {
        "provisioningState": "Succeeded",
        "autoUpgradeMinorVersion": false,
        "publisher": "Microsoft.ManagedServices",
        "type": "ApplicationHealthLinux",
        "typeHandlerVersion": "1.0",
        "settings": {
          "protocol": "http",
          "port": 80,
          "requestPath": "/"
        }
      }
    },
    {
      "type": "Microsoft.Compute/virtualMachineScaleSets/virtualMachines",
      "apiVersion": "2024-07-01",
      "name": "[concat(parameters('virtualMachineScaleSets_TP1_SCALESET_name'), '/', parameters('virtualMachineScaleSets_TP1_SCALESET_name'), '_ddac2be7')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]"
      ],
      "zones": [
        "1"
      ]
    },
    {
      "type": "microsoft.insights/autoscalesettings",
      "apiVersion": "2022-10-01",
      "name": "[parameters('autoscalesettings_TP1_SCALESETautoscale_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]"
      ],
      "properties": {
        "profiles": [
          {
            "name": "Default condition",
            "capacity": {
              "minimum": "1",
              "maximum": "10",
              "default": "2"
            },
            "rules": [
              {
                "metricTrigger": {
                  "metricName": "Percentage CPU",
                  "metricResourceUri": "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]",
                  "timeGrain": "PT1M",
                  "statistic": "Average",
                  "timeWindow": "PT5M",
                  "timeAggregation": "Average",
                  "operator": "GreaterThan",
                  "threshold": 50,
                  "dividePerInstance": false
                },
                "scaleAction": {
                  "direction": "Increase",
                  "type": "ChangeCount",
                  "value": "1",
                  "cooldown": "PT5M"
                }
              },
              {
                "metricTrigger": {
                  "metricName": "Percentage CPU",
                  "metricResourceUri": "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]",
                  "timeGrain": "PT1M",
                  "statistic": "Average",
                  "timeWindow": "PT5M",
                  "timeAggregation": "Average",
                  "operator": "LessThan",
                  "threshold": 30,
                  "dividePerInstance": false
                },
                "scaleAction": {
                  "direction": "Decrease",
                  "type": "ChangeCount",
                  "value": "1",
                  "cooldown": "PT5M"
                }
              }
            ]
          }
        ],
        "enabled": true,
        "name": "[parameters('autoscalesettings_TP1_SCALESETautoscale_name')]",
        "targetResourceUri": "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]",
        "predictiveAutoscalePolicy": {
          "scaleMode": "Disabled"
        }
      }
    },
    {
      "type": "Microsoft.Network/loadBalancers",
      "apiVersion": "2024-01-01",
      "name": "[parameters('loadBalancers_TP1_LOAD_BALANCER_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_TP1_LOAD_BALANCER_publicip_name'))]"
      ],
      "sku": {
        "name": "Standard",
        "tier": "Regional"
      },
      "properties": {
        "frontendIPConfigurations": [
          {
            "name": "[concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-frontendconfig01')]",
            "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), concat('/frontendIPConfigurations/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-frontendconfig01'))]",
            "properties": {
              "privateIPAllocationMethod": "Dynamic",
              "publicIPAddress": {
                "id": "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_TP1_LOAD_BALANCER_publicip_name'))]"
              }
            }
          }
        ],
        "backendAddressPools": [
          {
            "name": "bepool",
            "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]",
            "properties": {
              "loadBalancerBackendAddresses": [
                {
                  "name": "99789899-75ad-4171-abd3-85e24ca06a92",
                  "properties": {}
                }
              ]
            }
          }
        ],
        "loadBalancingRules": [
          {
            "name": "[concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-lbrule01')]",
            "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), concat('/loadBalancingRules/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-lbrule01'))]",
            "properties": {
              "frontendIPConfiguration": {
                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), concat('/frontendIPConfigurations/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-frontendconfig01'))]"
              },
              "frontendPort": 80,
              "backendPort": 80,
              "enableFloatingIP": false,
              "idleTimeoutInMinutes": 15,
              "protocol": "Tcp",
              "enableTcpReset": false,
              "loadDistribution": "Default",
              "disableOutboundSnat": true,
              "backendAddressPool": {
                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
              },
              "backendAddressPools": [
                {
                  "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
                }
              ],
              "probe": {
                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), concat('/probes/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-probe01'))]"
              }
            }
          }
        ],
        "probes": [
          {
            "name": "[concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-probe01')]",
            "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), concat('/probes/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-probe01'))]",
            "properties": {
              "protocol": "Tcp",
              "port": 80,
              "intervalInSeconds": 15,
              "numberOfProbes": 2,
              "probeThreshold": 1,
              "noHealthyBackendsBehavior": "AllProbedDown"
            }
          }
        ],
        "inboundNatRules": [
          {
            "name": "[concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-natRule01')]",
            "id": "[resourceId('Microsoft.Network/loadBalancers/inboundNatRules', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-natRule01'))]",
            "properties": {
              "frontendIPConfiguration": {
                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), concat('/frontendIPConfigurations/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-frontendconfig01'))]"
              },
              "frontendPort": 0,
              "backendPort": 22,
              "enableFloatingIP": false,
              "idleTimeoutInMinutes": 4,
              "protocol": "Tcp",
              "enableTcpReset": false,
              "frontendPortRangeStart": 50000,
              "frontendPortRangeEnd": 53599,
              "backendAddressPool": {
                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
              }
            }
          }
        ],
        "outboundRules": [],
        "inboundNatPools": []
      }
    },
    {
      "type": "Microsoft.Network/loadBalancers/backendAddressPools",
      "apiVersion": "2024-01-01",
      "name": "[concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '/bepool')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name'))]"
      ],
      "properties": {
        "loadBalancerBackendAddresses": [
          {
            "name": "99789899-75ad-4171-abd3-85e24ca06a92",
            "properties": {}
          }
        ]
      }
    },
    {
      "type": "Microsoft.Network/networkSecurityGroups/securityRules",
      "apiVersion": "2024-01-01",
      "name": "[concat(parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'), '/Tcp')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'))]"
      ],
      "properties": {
        "protocol": "Tcp",
        "sourcePortRange": "*",
        "destinationPortRange": "80",
        "sourceAddressPrefix": "*",
        "destinationAddressPrefix": "*",
        "access": "Allow",
        "priority": 300,
        "direction": "Inbound",
        "sourcePortRanges": [],
        "destinationPortRanges": [],
        "sourceAddressPrefixes": [],
        "destinationAddressPrefixes": []
      }
    },
    {
      "type": "Microsoft.Network/virtualNetworks/subnets",
      "apiVersion": "2024-01-01",
      "name": "[concat(parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'), '/default')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'))]"
      ],
      "properties": {
        "addressPrefix": "10.0.0.0/20",
        "delegations": [],
        "privateEndpointNetworkPolicies": "Disabled",
        "privateLinkServiceNetworkPolicies": "Enabled"
      }
    },
    {
      "type": "Microsoft.Compute/virtualMachines",
      "apiVersion": "2024-07-01",
      "name": "[parameters('virtualMachines_TP1_SCALESET_ddac2be7_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]",
        "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name'))]"
      ],
      "tags": {
        "VirtualMachineProfileTimeCreated": "10/25/2024 3:27:50 PM +00:00"
      },
      "zones": [
        "1"
      ],
      "properties": {
        "hardwareProfile": {
          "vmSize": "Standard_DC1s_v2"
        },
        "virtualMachineScaleSet": {
          "id": "[resourceId('Microsoft.Compute/virtualMachineScaleSets', parameters('virtualMachineScaleSets_TP1_SCALESET_name'))]"
        },
        "additionalCapabilities": {
          "hibernationEnabled": false
        },
        "storageProfile": {
          "imageReference": {
            "publisher": "canonical",
            "offer": "ubuntu-24_04-lts",
            "sku": "server",
            "version": "latest"
          },
          "osDisk": {
            "osType": "Linux",
            "name": "[concat(parameters('virtualMachines_TP1_SCALESET_ddac2be7_name'), '_OsDisk_1_614ac689998e4b70b1736e2bfb22abd1')]",
            "createOption": "FromImage",
            "caching": "ReadWrite",
            "managedDisk": {
              "storageAccountType": "StandardSSD_LRS",
              "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_TP1_SCALESET_ddac2be7_name'), '_OsDisk_1_614ac689998e4b70b1736e2bfb22abd1'))]"
            },
            "deleteOption": "Delete",
            "diskSizeGB": 30
          },
          "dataDisks": [],
          "diskControllerType": "SCSI"
        },
        "osProfile": {
          "computerName": "tp1-scale9IVY1L",
          "adminUsername": "azureuser",
          "linuxConfiguration": {
            "disablePasswordAuthentication": true,
            "ssh": {
              "publicKeys": [
                {
                  "path": "/home/azureuser/.ssh/authorized_keys",
                  "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCp9nhJerVAEqrf57Ubd2H4HDi1wPvro+tHoIxJ6J/tSqgHnvbjFoTtsfV70m36Q9Ft4DBeFnhHKNRbat/4tGfmmULX+BQvYNPFxB1FE8SYGIrOqhtuCBKdnhhMYLvUxDANP79gKJCZgImk3NR7hOgJEudTdTbEgK81bQNqAgY2o3g0dPdpup+f/uYTqB9vxMborgS/t6igFaqgsToL0C1Q80WgC+9Skiku0+PnRz0ujiS3vDmAlN3asC0DGAWo6QFxWdWmS7nCoQ23GVRW6M2Ed/Wss5LPUx0UO4ZJ+phiUGtu6oXIvc9QLAoL1OEqU5DO3RLsINkmjui+vyFba0XAnyBo6cCmwSUgX+xOR/cjuqKFP2/qHG/tOlICzGUFWCGcLEMy0StZ3UDx0nLH4XGOF3f3mbA5QrMjx1t0IbQ3sG+QUexdRf6g24zp8ZC0EANAf49zYopaw/8zPM9TAVeZSeYHN7Otoqxox6qx+f5mBLWKv1Z3MKPSmf5Xjo/StRE= generated-by-azure"
                }
              ]
            },
            "provisionVMAgent": true,
            "patchSettings": {
              "patchMode": "ImageDefault",
              "assessmentMode": "ImageDefault"
            }
          },
          "secrets": [],
          "allowExtensionOperations": true,
          "requireGuestProvisionSignal": true
        },
        "securityProfile": {
          "uefiSettings": {
            "secureBootEnabled": true,
            "vTpmEnabled": true
          },
          "securityType": "TrustedLaunch"
        },
        "networkProfile": {
          "networkInterfaces": [
            {
              "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name'))]",
              "properties": {
                "primary": true,
                "deleteOption": "Delete"
              }
            }
          ]
        },
        "diagnosticsProfile": {
          "bootDiagnostics": {
            "enabled": true
          }
        }
      }
    },
    {
      "type": "Microsoft.Network/loadBalancers/inboundNatRules",
      "apiVersion": "2024-01-01",
      "name": "[concat(parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '/', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), '-natRule01')]",
      "dependsOn": [
        "[resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name'))]",
        "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
      ],
      "properties": {
        "frontendIPConfiguration": {
          "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_TP1_LOAD_BALANCER_name')), '/frontendIPConfigurations/TP1-LOAD-BALANCER-frontendconfig01')]"
        },
        "frontendPort": 0,
        "backendPort": 22,
        "enableFloatingIP": false,
        "idleTimeoutInMinutes": 4,
        "protocol": "Tcp",
        "enableTcpReset": false,
        "frontendPortRangeStart": 50000,
        "frontendPortRangeEnd": 53599,
        "backendAddressPool": {
          "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
        }
      }
    },
    {
      "type": "Microsoft.Compute/virtualMachineScaleSets",
      "apiVersion": "2024-07-01",
      "name": "[parameters('virtualMachineScaleSets_TP1_SCALESET_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'), 'default')]",
        "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]",
        "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'))]"
      ],
      "sku": {
        "name": "Standard_DC1s_v2",
        "tier": "Standard",
        "capacity": 1
      },
      "zones": [
        "1",
        "2"
      ],
      "properties": {
        "singlePlacementGroup": false,
        "orchestrationMode": "Flexible",
        "upgradePolicy": {
          "mode": "Manual"
        },
        "scaleInPolicy": {
          "rules": [
            "Default"
          ],
          "forceDeletion": false
        },
        "virtualMachineProfile": {
          "osProfile": {
            "computerNamePrefix": "tp1-scale",
            "adminUsername": "azureuser",
            "linuxConfiguration": {
              "disablePasswordAuthentication": true,
              "ssh": {
                "publicKeys": [
                  {
                    "path": "/home/azureuser/.ssh/authorized_keys",
                    "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCp9nhJerVAEqrf57Ubd2H4HDi1wPvro+tHoIxJ6J/tSqgHnvbjFoTtsfV70m36Q9Ft4DBeFnhHKNRbat/4tGfmmULX+BQvYNPFxB1FE8SYGIrOqhtuCBKdnhhMYLvUxDANP79gKJCZgImk3NR7hOgJEudTdTbEgK81bQNqAgY2o3g0dPdpup+f/uYTqB9vxMborgS/t6igFaqgsToL0C1Q80WgC+9Skiku0+PnRz0ujiS3vDmAlN3asC0DGAWo6QFxWdWmS7nCoQ23GVRW6M2Ed/Wss5LPUx0UO4ZJ+phiUGtu6oXIvc9QLAoL1OEqU5DO3RLsINkmjui+vyFba0XAnyBo6cCmwSUgX+xOR/cjuqKFP2/qHG/tOlICzGUFWCGcLEMy0StZ3UDx0nLH4XGOF3f3mbA5QrMjx1t0IbQ3sG+QUexdRf6g24zp8ZC0EANAf49zYopaw/8zPM9TAVeZSeYHN7Otoqxox6qx+f5mBLWKv1Z3MKPSmf5Xjo/StRE= generated-by-azure"
                  }
                ]
              },
              "provisionVMAgent": true,
              "patchSettings": {
                "patchMode": "ImageDefault",
                "assessmentMode": "ImageDefault"
              }
            },
            "secrets": [],
            "allowExtensionOperations": true,
            "requireGuestProvisionSignal": true
          },
          "storageProfile": {
            "osDisk": {
              "osType": "Linux",
              "createOption": "FromImage",
              "caching": "ReadWrite",
              "managedDisk": {
                "storageAccountType": "StandardSSD_LRS"
              },
              "deleteOption": "Delete",
              "diskSizeGB": 30
            },
            "imageReference": {
              "publisher": "canonical",
              "offer": "ubuntu-24_04-lts",
              "sku": "server",
              "version": "latest"
            },
            "diskControllerType": "SCSI"
          },
          "networkProfile": {
            "networkApiVersion": "2020-11-01",
            "networkInterfaceConfigurations": [
              {
                "name": "UQAC-8CLD201-G11-TP1-vnet-nic01",
                "properties": {
                  "primary": true,
                  "enableAcceleratedNetworking": false,
                  "disableTcpStateTracking": false,
                  "enableIPForwarding": false,
                  "auxiliaryMode": "None",
                  "auxiliarySku": "None",
                  "deleteOption": "Delete",
                  "ipConfigurations": [
                    {
                      "name": "UQAC-8CLD201-G11-TP1-vnet-nic01-defaultIpConfiguration",
                      "properties": {
                        "privateIPAddressVersion": "IPv4",
                        "subnet": {
                          "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'), 'default')]"
                        },
                        "primary": true,
                        "publicIPAddressConfiguration": {
                          "name": "publicIp-UQAC-8CLD201-G11-TP1-vnet-nic01",
                          "properties": {
                            "idleTimeoutInMinutes": 15,
                            "ipTags": [],
                            "publicIPAddressVersion": "IPv4"
                          }
                        },
                        "applicationSecurityGroups": [],
                        "loadBalancerBackendAddressPools": [
                          {
                            "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
                          }
                        ],
                        "applicationGatewayBackendAddressPools": []
                      }
                    }
                  ],
                  "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'))]"
                  },
                  "dnsSettings": {
                    "dnsServers": []
                  }
                }
              }
            ]
          },
          "diagnosticsProfile": {
            "bootDiagnostics": {
              "enabled": true
            }
          },
          "extensionProfile": {
            "extensions": [
              {
                "name": "HealthExtension",
                "properties": {
                  "autoUpgradeMinorVersion": false,
                  "publisher": "Microsoft.ManagedServices",
                  "type": "ApplicationHealthLinux",
                  "typeHandlerVersion": "1.0",
                  "settings": {
                    "protocol": "http",
                    "port": 80,
                    "requestPath": "/"
                  }
                }
              }
            ]
          },
          "securityProfile": {
            "uefiSettings": {
              "secureBootEnabled": true,
              "vTpmEnabled": true
            },
            "securityType": "TrustedLaunch"
          }
        },
        "additionalCapabilities": {
          "hibernationEnabled": false
        },
        "zoneBalance": false,
        "platformFaultDomainCount": 1,
        "automaticRepairsPolicy": {
          "enabled": false,
          "gracePeriod": "PT10M",
          "repairAction": "Replace"
        },
        "constrainedMaximumCapacity": false
      }
    },
    {
      "type": "Microsoft.Network/networkInterfaces",
      "apiVersion": "2024-01-01",
      "name": "[parameters('networkInterfaces_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name')]",
      "location": "eastus",
      "dependsOn": [
        "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_publicIp_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name'))]",
        "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'), 'default')]",
        "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]",
        "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'))]"
      ],
      "tags": {
        "fastpathenabled": "True"
      },
      "kind": "Regular",
      "properties": {
        "ipConfigurations": [
          {
            "name": "UQAC-8CLD201-G11-TP1-vnet-nic01-defaultIpConfiguration",
            "id": "[concat(resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name')), '/ipConfigurations/UQAC-8CLD201-G11-TP1-vnet-nic01-defaultIpConfiguration')]",
            "type": "Microsoft.Network/networkInterfaces/ipConfigurations",
            "properties": {
              "privateIPAddress": "10.0.0.4",
              "privateIPAllocationMethod": "Dynamic",
              "publicIPAddress": {
                "id": "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_publicIp_UQAC_8CLD201_G11_TP1_vnet_nic01_a316d225_name'))]",
                "properties": {
                  "deleteOption": "Delete"
                }
              },
              "subnet": {
                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_UQAC_8CLD201_G11_TP1_vnet_name'), 'default')]"
              },
              "primary": true,
              "privateIPAddressVersion": "IPv4",
              "loadBalancerBackendAddressPools": [
                {
                  "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_TP1_LOAD_BALANCER_name'), 'bepool')]"
                }
              ]
            }
          }
        ],
        "dnsSettings": {
          "dnsServers": []
        },
        "enableAcceleratedNetworking": false,
        "enableIPForwarding": false,
        "disableTcpStateTracking": false,
        "networkSecurityGroup": {
          "id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_basicNsgUQAC_8CLD201_G11_TP1_vnet_nic01_name'))]"
        },
        "nicType": "Standard",
        "auxiliaryMode": "None",
        "auxiliarySku": "None"
      }
    }
  ]
}